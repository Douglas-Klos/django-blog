{% extends "base.html" %}{% block content %}

    <div class="col-container">
        <div class="col">
            <h1>Recent Posts</h1>
        </div>

        {% if user.is_authenticated %}
            <div class="col" align="right">
                <button id="newPost">New Post</button>
                <script type="text/javascript">
                    document.getElementById("newPost").onclick = function () {
                        location.href = "add/";
                    };
                </script>
            </div>
         {% endif %}
    </div>
    
    <form method="post">
        {% csrf_token %}

        {% for post in posts %}
        {% autoescape off %}
        {{ post.text }}
        {% endautoescape %}
            <div class="post">
                <h2 style="margin: 0">
                    <a href="{% url 'blog_detail' post.pk %}">{{ post }}</a>
                </h2>

                <p class="post-body" style="white-space: pre-wrap;">{{ post.text }}</p>

                <div class="col-container">
                    <div class="col">
                        <b>Categories:</b><br>
                        <ul class="categories">
                            {% for category in post.categories.all %}
                                <li>{{ category }}</li><br>
                            {% endfor %}
                        </ul>
                    </div>
                    <div class="col" align="right">
                        {{ post.author.username }}<br>
                        {{ post.published_date }}
                
                        {% if post.author == user %}
                            <br>
                                <button type="submit" value="{{ post.id }}" name="post_id">Unpublish</button>
                        {% endif %}

                    </div>
                </div>

            </div>
            <br>
        {% endfor %}
    </form>
{% endblock %}
        
